<sm-modal title="Proveedor" class="fluid provider-modal" #providerModal>
  <modal-content>
    <form class="ui form" [formGroup]="providerForm" name="Form">
      <div class="ui horizontal divider">Datos Generales</div>

      <div class="ui left aligned basic segment">
        <div class="form-group field">
          <sm-input type="text" label="Nombre" [control]="providerForm.controls.name" placeholder="Ingresar Nombre"> </sm-input>
          <app-input-error-messages [control]="providerForm.controls.name"></app-input-error-messages>
        </div>

        <div class="form-group field">
          <sm-input
            type="text"
            label="Nombre De Fantasia"
            [control]="providerForm.controls.fantasyName"
            placeholder="Ingresar nombre de fantasia"
          >
          </sm-input>
          <app-input-error-messages [control]="providerForm.controls.fantasyName"></app-input-error-messages>
        </div>

        <div class="form-group field">
          <sm-input type="email" label="E-mail" [control]="providerForm.controls.email" placeholder="Ingresar E-mail"> </sm-input>
          <app-input-error-messages [control]="providerForm.controls.email"></app-input-error-messages>
        </div>

        <div class="form-group field">
          <sm-input type="text" label="Localidad" [control]="providerForm.controls.place" placeholder="Ingresar Localidad"> </sm-input>
          <app-input-error-messages [control]="providerForm.controls.place"></app-input-error-messages>
        </div>

        <div class="form-group field">
          <sm-input type="number" label="Código Postal" [control]="providerForm.controls.codigoPostal" placeholder="Ingresar código postal">
          </sm-input>
          <app-input-error-messages [control]="providerForm.controls.codigoPostal"></app-input-error-messages>
        </div>

        <div class="form-group field">
          <sm-input type="text" label="Provincia" [control]="providerForm.controls.codigoProvincia" placeholder="Ingresar código provincia">
          </sm-input>
          <app-input-error-messages [control]="providerForm.controls.codigoProvincia"></app-input-error-messages>
        </div>

        <div class="form-group field">
          <sm-input type="number" label="Punto de venta" [control]="providerForm.controls.sale_point" placeholder="Ingresar punto de venta">
          </sm-input>
          <app-input-error-messages [control]="providerForm.controls.sale_point"></app-input-error-messages>
        </div>

        <div class="form-group field">
          <sm-input
            type="date"
            label="Fecha de inicio de actividad"
            [control]="providerForm.controls.start_date"
            placeholder="Ingresar fecha de inicio de actividad"
          ></sm-input>
          <app-input-error-messages [control]="providerForm.controls.start_date"></app-input-error-messages>
        </div>

        <div class="form-group field">
          <sm-input type="text" label="Dirección" [control]="providerForm.controls.address" placeholder="Ingresar Dirección"> </sm-input>
          <app-input-error-messages [control]="providerForm.controls.address"></app-input-error-messages>
        </div>

        <div class="form-group field">
          <sm-input type="number" label="Teléfono" [control]="providerForm.controls.telephone" placeholder="Ingresar Teléfono"> </sm-input>
          <app-input-error-messages [control]="providerForm.controls.telephone"></app-input-error-messages>
        </div>

        <div class="form-group field">
          <sm-input type="number" label="C.U.I.T (solo números)" [control]="providerForm.controls.cuit" placeholder="Ingresar C.U.I.T">
          </sm-input>
          <app-input-error-messages [control]="providerForm.controls.cuit"></app-input-error-messages>
        </div>

        <div class="form-group field">
          <sm-select
            class="fluid search inverted"
            label="Tipo de Documento"
            [(model)]="tipoDocumento"
            (onChange)="checkDocumentType($event)"
            placeholder="Seleccione tipo de documento"
          >
            <option *ngFor="let tipo of documentTypes" [value]="tipo.value">{{ tipo.label }}</option>
          </sm-select>
          <app-input-error-messages [control]="providerForm.controls.tipoDocumento"></app-input-error-messages>
        </div>

        <div class="form-group field">
          <sm-input type="text" label="Documento" [control]="providerForm.controls.documento" placeholder="Ingresar Documento"> </sm-input>
          <app-input-error-messages [control]="providerForm.controls.documento"></app-input-error-messages>
        </div>

        <div class="form-group field">
          <sm-input type="text" label="Página Web" [control]="providerForm.controls.web" placeholder="Ingresar Página Web"> </sm-input>
          <app-input-error-messages [control]="providerForm.controls.web"></app-input-error-messages>
        </div>

        <div class="ui divider"></div>

        <div class="form-group field">
          <div class="ui toggle checkbox">
            <sm-checkbox
              label="Impuesto a las Ganancias"
              [control]="providerForm.controls.ganancia"
              placeholder="Ingresar si posee impuesto a las ganancias"
            >
            </sm-checkbox>
          </div>
        </div>

        <div class="ui horizontal divider">Tipo de responsabilidad</div>

        <div class="form-group field">
          <div class="ui toggle checkbox">
            <sm-checkbox
              label="Responsable Inscripto"
              [control]="providerForm.controls.responsableInscripto"
              (change)="responsableChange(providerForm.controls.responsableInscripto)"
              placeholder="Ingresar responsable inscripto"
            >
            </sm-checkbox>
          </div>
        </div>

        <div class="form-group field">
          <div class="ui toggle checkbox">
            <sm-checkbox
              label="Exento"
              [control]="providerForm.controls.excento"
              (change)="responsableChange(providerForm.controls.excento)"
              placeholder="Ingresar si es exento"
            >
            </sm-checkbox>
          </div>
        </div>

        <div class="form-group field">
          <div class="ui toggle checkbox">
            <sm-checkbox
              label="Responsable Monotributo"
              [control]="providerForm.controls.responsableMonotributo"
              (change)="responsableChange(providerForm.controls.responsableMonotributo)"
              placeholder="Ingresar si es responsable monotributo"
            >
            </sm-checkbox>
          </div>
        </div>

        <div class="ui horizontal divider">Tipo de retenciones</div>

        <div *ngFor="let item of retentionTypes" class="form-group field">
          <div class="ui toggle checkbox">
            <sm-checkbox
              label="Iva No Inscripto"
              [control]="providerForm.controls.ivaInscripto"
              (change)="responsableChange(providerForm.controls.ivaInscripto)"
              placeholder="Ingresar si es iva no inscripto"
            >
            </sm-checkbox>
          </div>
        </div>

        <div *ngFor="let item of retentionTypes" class="form-group field">
          <div class="form-group field">
            <sm-input
              type="number"
              [label]="item.label + ' Porcentaje'"
              [control]="providerForm.controls[item.value + 'Percentage']"
              placeholder="Ingresar Página Web"
            >
            </sm-input>
            <app-input-error-messages [control]="providerForm.controls[item.value + 'Percentage']"></app-input-error-messages>
          </div>
        </div>
      </div>

      <modal-actions>
        <div fxLayout="column" fxLayoutGap="15px">
          <div fxLayout="row" fxLayoutAlign.xs="center center" fxLayoutGap="15px">
            <button
              class="ui button tiny"
              (click)="addProvider(providerForm)"
              [disabled]="providerForm.invalid"
              *ngIf="isNew(providerForm)"
            >
              Agregar Proveedor
            </button>
            <button
              class="ui button tiny"
              (click)="updateProvider(providerForm)"
              [disabled]="providerForm.invalid"
              *ngIf="!isNew(providerForm)"
            >
              Actualizar Datos
            </button>
            <button class="ui button tiny" (click)="deleteProvider(providerForm)" *ngIf="!isNew(providerForm)">Borrar Proveedor</button>
          </div>
          <div fxLayout="row" fxLayoutAlign="end center">
            <button fxFlex="20" fxFlex.xs="100" class="ui button tiny" (click)="providerModal.hide()">Cancelar</button>
          </div>
        </div>
      </modal-actions>
    </form>
  </modal-content>
</sm-modal>
<modal-actions> <simple-notifications *ngIf="options" [options]="options"></simple-notifications> </modal-actions>
